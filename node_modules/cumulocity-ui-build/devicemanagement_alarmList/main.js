/* devicemanagement_alarmList 8.21.0 2018-01-30T22:08:28+00:00 ab57d6f7e859+ (release/8.21.0) r8.21.0 */
angular.module("c8y.parts.alarmList",[]).config(["c8yNavigatorProvider","c8yViewsProvider","gettext",function(e,t,i){var n="bell",a="alarms",s=i("Overviews");e.addNavigation({parent:s,name:i("Alarms"),priority:2480,icon:n,path:a}),t.when("/alarms",{templateUrl:"devicemanagement_alarmList/views/index.html"}),t.when("/device/:deviceId",{name:i("Alarms"),priority:800,icon:n,templateUrl:"devicemanagement_alarmList/views/index.html"})}]),function(){"use strict";function e(e,t,i,n,a){function s(){u.filter={pageSize:100},u.unresolved=!0,v(),t.deviceId&&(u.filter.source=t.deviceId,u.filter.pageSize=1e3),d.forEach(function(e){f[e]=!0}),r(),l()}function r(){d.forEach(function(e){g[e]=_.assign({},u.filter,{severity:e})})}function l(){n.changeTitle({title:a("Alarms")})}function c(){return t.deviceId?u.unresolved:void 0}function v(){u.filter.resolved=!u.unresolved,r()}function o(){e.$broadcast("alarmListRefresh")}function m(){return _.some(y)}var u=this,d=_.reverse(_.cloneDeep(i.severityList)),f={},g={},y={};_.assign(u,{icon:i.icon,realtime:!0,severities:d,activeSeverities:f,severityFilters:g,refreshingSeverities:y,changeResolved:v,clientSideUnresolved:c,refresh:o,isRefreshing:m}),s()}e.$inject=["$scope","$routeParams","c8yAlarms","c8yTitle","gettext"],angular.module("c8y.parts.alarmList").controller("alarmListCtrl",e)}(),function(){"use strict";function e(e){var t;t='<div ng-controller="alarmListCtrl as vm">\n  <c8y-ui-action-bar-set>\n    <li class="btn-group" action-bar-position="left">\n      <button ng-repeat="severity in vm.severities" type="button" class="btn btn-default" ng-model="vm.activeSeverities[severity]" ng-click="vm.activeSeverities[severity] = !vm.activeSeverities[severity]" ng-class="{\'active\': vm.activeSeverities[severity]}">\n        <i c8y-icon="{{vm.icon(severity)}}" class="status" ng-class="severity | lowercase"></i>\n        <span ng-bind="severity | lowercase | humanize | translate"></span>\n      </button>\n      <!-- @TODO: this is placeholder button to show all alarm types\n      <button type="button" class="btn btn-default">\n        {{\'All\' | translate}}\n      </button>\n      -->\n    </li>\n\n    <li class="navbar-form">\n      <label class="c8y-switch">\n        <input type="checkbox" ng-model="vm.unresolved" ng-change="vm.changeResolved()" ng-true-value="false" ng-false-value="true">\n        <span></span>\n        <p translate>Show cleared alarms</p>\n      </label>\n    </li>\n\n    <c8y-realtime-switch state="vm.realtime"></c8y-realtime-switch>\n\n    <a href="" class="btn btn-link" title="{{\'Refresh alarm list contents\' | translate}}" ng-click="vm.refresh()">\n      <i c8y-icon="refresh" ng-class="{\'fa-spin\': vm.isRefreshing()}"></i>\n      <span translate>Reload</span>\n    </a>\n  </c8y-ui-action-bar-set>\n\n  <div ng-repeat="severity in vm.severities">\n    <c8y-alarm-list ng-if="vm.activeSeverities[severity]" filter="vm.severityFilters[severity]" realtime="vm.realtime" hide-header-actions="true" data-title="{text:(severity | humanize), icon:vm.icon(severity), class:(severity | lowercase)}" unresolved="vm.clientSideUnresolved()" refresh-loading="vm.refreshingSeverities[severity]">\n    </c8y-alarm-list>\n  </div>\n</div>\n',e.put("devicemanagement_alarmList/views/index.html",t),e.put("/apps/devicemanagement/alarmList/views/index.html",t)}angular.module("c8y.parts.alarmList").run(["$templateCache",e])}();