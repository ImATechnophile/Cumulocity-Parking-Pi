/* core_propertiesLibrary 8.21.0 2018-01-30T22:09:18+00:00 ab57d6f7e859+ (release/8.21.0) r8.21.0 */
!function(){"use strict";function e(e,n,t,c){function s(e){var n=function(n){n.filters={appliesTo:e}};return n.$inject=["$scope"],n}var o="properties-library",r=c("Properties library"),a={parent:c("Settings"),name:r,path:o,icon:"book",priority:1e3},i="/"+o,l='<c8y-json-schema-objects-list filters="filters"></c8y-json-schema-objects-list>',m=[{name:c("Inventory"),icon:"cubes",template:l,controller:s({MANAGED_OBJECTS:!0}),priority:4e3},{name:c("Alarm"),icon:"bell",template:l,controller:s({ALARMS:!0}),priority:3e3},{name:c("Event"),icon:"c8y-events",template:l,controller:s({EVENTS:!0}),priority:2e3},{name:c("Tenant"),icon:"c8y-sub-tenants",template:l,controller:s({TENANTS:!0}),priority:1e3,showIfPermissions:{anyRole:["ROLE_TENANT_MANAGEMENT_READ"]}}];e.addNavigation(a),n.addTitle(i,{data:_.constant({title:r})}),_.forEach(m,function(e){t.when(i,e)})}e.$inject=["c8yNavigatorProvider","c8yTitleProvider","c8yViewsProvider","gettext"],angular.module("c8y.propertiesLibrary",[]).config(e)}(),function(){"use strict";function e(e,n,t,c,s){function o(){r()}function r(){return n.list().then(a).then(function(e){j.jsonSchemaObjects=e})}function a(e){return _.filter(e,j.filters)}function i(e){j.selected=e}function l(){j.selected=void 0}function m(){i(_.assign(n.getDefaults(),j.filters))}function h(e){return n.save(e).then(l).then(r).then(_.partial(t.success,s("Property saved!")))}function b(e){return n.remove(e).then(l).then(r).then(_.partial(t.success,s("Property removed!")))}function d(){var n=e.path(),t=_.find(c.getTabsByURL(n),{path:n});return _.get(t,"icon")}var j=this;_.assign(j,{$onInit:o,select:i,deselect:l,newJsonSchemaObject:m,save:h,remove:b,getIcon:d})}e.$inject=["$location","c8yJsonSchemas","c8yAlert","c8yTabs","gettext"],angular.module("c8y.propertiesLibrary").component("c8yJsonSchemaObjectsList",{bindings:{filters:"<"},templateUrl:"core_propertiesLibrary/jsonSchemaObjectsList.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(){function e(e){e._jsonSchemaObject&&(o.jsonSchemaObject=_.cloneDeep(o._jsonSchemaObject))}function n(e){if(o.jsonSchemaObject){var n=_.first(_.keys(e.properties)),t=_.get(e,["properties",n,"title"],"");_.set(o.jsonSchemaObject,"name",t),_.assign(o.jsonSchemaObject.c8y_JsonSchema,e)}}function t(){o.onSave({jsonSchemaObject:o.jsonSchemaObject,originalJsonSchemaObject:o._jsonSchemaObject})}function c(){o.onRemove({jsonSchemaObject:o.jsonSchemaObject})}function s(){o.onCancel()}var o=this;_.assign(o,{$onChanges:e,onSchemaChange:n,save:t,remove:c,cancel:s})}angular.module("c8y.propertiesLibrary").component("c8yJsonSchemaObjectEditor",{bindings:{_jsonSchemaObject:"<jsonSchemaObject",onSave:"&",onRemove:"&",onCancel:"&"},templateUrl:"core_propertiesLibrary/jsonSchemaObjectEditor.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e){var n;n='<form name="jsonSchemaObjectForm" class="inner-scroll" novalidate>\n  <div class="card-block">\n    <c8y-schema-editor schema="vm.jsonSchemaObject.c8y_JsonSchema" on-change="vm.onSchemaChange(schema)">\n    </c8y-schema-editor>\n  </div>\n\n  <div class="card-footer separator text-center">\n    <button class="btn btn-default" ng-click="vm.cancel()" translate>\n      Cancel\n    </button>\n    <button class="btn btn-danger" ng-if="vm.jsonSchemaObject.id" ng-click="vm.remove()" translate>\n      Remove\n    </button>\n    <button class="btn btn-primary" ng-click="vm.save()" ng-disabled="jsonSchemaObjectForm.$invalid || jsonSchemaObjectForm.$pristine" translate>\n      Save\n    </button>\n  </div>\n</form>',e.put("core_propertiesLibrary/jsonSchemaObjectEditor.html",n),e.put("/apps/core/propertiesLibrary/jsonSchemaObjectEditor.html",n),n='<div class="row split-scroll">\r\n  <div class="col-md-4 scroll-column has-footer">\r\n\r\n    <ul class="nav c8y-nav-stacked inner-scroll">\r\n      <li ng-if="vm.jsonSchemaObjects.length" class="c8y-stacked-item" ng-repeat="jsonSchemaObject in vm.jsonSchemaObjects | orderBy:\'name\'" ng-click="vm.select(jsonSchemaObject)" ng-class="{active: vm.selected === jsonSchemaObject}">\r\n        <span class="text-truncate">\r\n          <span ng-bind="jsonSchemaObject.name"></span>\r\n        </span>\r\n      </li>\r\n      <li ng-show="vm.jsonSchemaObjects.length === 0" class="card">\r\n        <div class="card-block">\r\n          <div class="c8y-empty-state text-left" style="padding:0">\r\n            <h1 class="c8y-icon c8y-icon-duocolor" c8y-icon="{{vm.getIcon()}}">\r\n            </h1>\r\n            <p translate><strong>No properties found.</strong> Click below to add the first one.</p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <div class="scroll-column-footer">\r\n      <button class="btn-add-block" ng-click="vm.newJsonSchemaObject()">\r\n        <i c8y-icon="plus-square"></i> <translate>Add property</translate>\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="col-md-8 scroll-column slideOutRight fast" ng-class="{\'slideInRight animated\': vm.selected, \'slideOutRight animated\': !vm.selected && vm.jsonSchemaObjects}" style="animation-fill-mode: forwards">\r\n    <div class="card" style="margin-bottom:0">\r\n      <div class="card-header separator visible-sm visible-xs" style="width:100%">\r\n        <button class="btn btn-clean" title="{{\'Back\'| translate}}" ng-click="vm.deselect()">\r\n          <i c8y-icon="chevron-left"></i><span translate>Back</span>\r\n        </button>\r\n      </div>\r\n      <c8y-json-schema-object-editor json-schema-object="vm.selected" on-save="vm.save(jsonSchemaObject)" on-cancel="vm.deselect()" on-remove="vm.remove(jsonSchemaObject)">\r\n      </c8y-json-schema-object-editor>\r\n    </div>\r\n  </div>\r\n</div>',e.put("core_propertiesLibrary/jsonSchemaObjectsList.html",n),e.put("/apps/core/propertiesLibrary/jsonSchemaObjectsList.html",n)}angular.module("c8y.propertiesLibrary").run(["$templateCache",e])}();